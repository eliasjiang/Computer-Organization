## 二进制表示小数

![](markdown_import_image/import-2022-12-25-17-49-03.png)

至此，大家应该明白了为什么用代码清单 3-1 的程序无法得到正确结果了吧。因为无法正确表示的数值，最后都变成了近似值。计算机这个功能有限的机器设备，是无法处理无限循环的小数的。因此，在遇到循环小数时，计算机就会根据变量数据类型所对应的长度将数值从中间截断或者四舍五入。

## 浮点数

很多编程语言中都提供了两种表示小数的数据类型，分别是双精度浮点数和单精度浮点数。双精度浮点数类型 用 64 位、单精度浮点数类型 用 32 位来表示全体小数。

浮点数 是指用符号、尾数、基数和指数这四部分来表示的小数（图 3-3）。因为计算机内部使用的是二进制数，所以基数自然就是 2。因此，实际的数据中往往不考虑基数，只用符号、尾数、指数这三部分即可表示浮点数。也就是说，64 位（双精度浮点数）和 32 位（单精度浮点数）的数据，会被分为三部分来使用（图 3-4）。

![](markdown_import_image/import-2022-12-25-17-51-38.png)

![](markdown_import_image/import-2022-12-25-17-52-01.png)

## 正则表达式和 EXCESS 系统
尾数部分 使用正则表达式，可以将表现形式多样的浮点数统一为一种表现形式。

在二进制数中，我们使用的是“将小数点前面的值固定为 1 的正则表达式 ”。

![](markdown_import_image/import-2022-12-25-17-54-28.png)

接下来，让我们一起来看一下指数部分 中使用的 EXCESS 系统，使用这种方法主要是为了表示负数时不使用符号位。在某些情况下，在指数部分，需要通过“负○○次幂”的形式来表示负数。EXCESS 系统表现 是指，通过将指数部分表示范围的中间值设为 0，使得负数不需要用符号来表示。

## 如何避免计算机计算出错

首先是回避策略，即无视这些错误。根据程序目的的不同，有时一些微小的偏差并不会造成什么问题。

另一个策略是把小数转换成整数来计算。计算机在进行小数计算时可能会出错，但进行整数计算（只要不超过可处理的数值范围）时一定不会出现问题。

除此之外，BCD （Binary Coded Decimal）也是一种使用二进制表示十进制的方法。在涉及财务计算等不允许出现误差的情况下，一定要将小数转换成整数或者采用 BCD 方法，以确保最终得到准确的数值。